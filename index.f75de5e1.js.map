{"mappings":"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","sources":["src/scripts/main.js"],"sourcesContent":["\"use strict\";\n\nlet valueBoard;\nconst rows = 4;\nconst columns = 4;\nlet score = 0;\n\nconst buttonStart = document.querySelector(\".start\");\nconst fieldRows = document.querySelectorAll(\"tr\");\nconst cells = document.querySelectorAll(\"td\");\nconst messageStart = document.querySelector(\".message-start\");\nconst messageWin = document.querySelector(\".message-win\");\nconst messageLose = document.querySelector(\".message-lose\");\n\nconst board = [];\n\n[...fieldRows].forEach((row) => {\n  const cell = row.querySelectorAll(\"td\");\n\n  board.push(cell);\n});\n\nfunction setGame() {\n  valueBoard = [\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n  ];\n\n  addNumber();\n  addNumber();\n\n  for (let i = 0; i < rows; i++) {\n    for (let j = 0; j < rows; j++) {\n      const number = valueBoard[i][j];\n\n      updateCell(board[i][j], number);\n    }\n  }\n}\n\nfunction updateCell(cell, num) {\n  cell.classList.value = `field-cell`;\n\n  if (num > 0) {\n    cell.textContent = num;\n    cell.classList.add(`field-cell--${num}`);\n  } else if (num === 0) {\n    cell.textContent = \"\";\n  }\n}\n\nfunction createRandomNumber(num) {\n  return Math.floor(Math.random() * num);\n}\n\nfunction addNumber() {\n  if (!hasEmptyCell()) {\n    return;\n  }\n\n  let activeCell = false;\n\n  while (!activeCell) {\n    const r = createRandomNumber(rows);\n    const c = createRandomNumber(columns);\n\n    if (valueBoard[r][c] === 0) {\n      const num = Math.random() <= 0.1 ? 4 : 2;\n\n      valueBoard[r][c] = num;\n      board[r][c].textContent = num;\n      board[r][c].classList.add(`field-cell--${num}`);\n      activeCell = true;\n    }\n  }\n}\n\nfunction hasEmptyCell() {\n  for (let i = 0; i < rows; i++) {\n    for (let j = 0; j < columns; j++) {\n      if (valueBoard[i][j] === 0) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n}\n\ndocument.addEventListener(\"click\", (ev) => {\n  ev.preventDefault();\n\n  if (ev.target.closest(\".start\")) {\n    messageStart.classList.add(`hidden`);\n    buttonStart.textContent = \"Restart\";\n    buttonStart.classList.add(`restart`);\n    buttonStart.classList.remove(`start`);\n    setGame();\n    document.addEventListener(\"keydown\", playGame);\n  } else if (ev.target.closest(\".restart\")) {\n    setGame();\n    score = 0;\n    document.querySelector(\".game-score\").textContent = score;\n  }\n});\n\nfunction hasAdjacentSameNumbers(data) {\n  for (let i = 0; i < rows; i++) {\n    for (let j = 0; j < columns; j++) {\n      if (i < rows - 1 && data[i][j] === data[i + 1][j]) {\n        return true;\n      } else if (j < columns - 1 && data[i][j] === data[i][j + 1]) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n}\n\nfunction filterZero(data) {\n  const newRow = data.filter((num) => num !== 0);\n\n  return newRow;\n}\n\nfunction move(data) {\n  let flag = false;\n  let row = filterZero(data);\n  const rowStart = data;\n\n  for (let i = 0; i < row.length - 1; i++) {\n    if (row[i] === row[i + 1]) {\n      flag = true;\n      row[i] *= 2;\n      row[i + 1] = 0;\n      score += row[i];\n    }\n  }\n\n  row = filterZero(row);\n\n  while (row.length < columns) {\n    row.push(0);\n  }\n\n  if (rowStart.toString() !== row.toString()) {\n    flag = true;\n  }\n\n  return [row, flag];\n}\n\nfunction hasActions(actions) {\n  if (actions.includes(true)) {\n    addNumber();\n  }\n}\n\nfunction moveLeft() {\n  const actions = [];\n  let flag;\n\n  for (let r = 0; r < rows; r++) {\n    let row = valueBoard[r];\n\n    [row, flag] = move(row);\n    actions.push(flag);\n    valueBoard[r] = row;\n\n    for (let c = 0; c < columns; c++) {\n      const number = valueBoard[r][c];\n\n      updateCell(board[r][c], number);\n    }\n  }\n\n  hasActions(actions);\n  checkLose();\n  checkWin();\n}\n\nfunction moveRight() {\n  const actions = [];\n  let flag;\n\n  for (let r = 0; r < rows; r++) {\n    let row = valueBoard[r];\n\n    row.reverse();\n    [row, flag] = move(row);\n    actions.push(flag);\n    valueBoard[r] = row.reverse();\n\n    for (let c = 0; c < columns; c++) {\n      const number = valueBoard[r][c];\n\n      updateCell(board[r][c], number);\n    }\n  }\n  hasActions(actions);\n  checkLose();\n  checkWin();\n}\n\nfunction moveUp() {\n  const actions = [];\n  let flag;\n\n  for (let c = 0; c < columns; c++) {\n    let column = [\n      valueBoard[0][c],\n      valueBoard[1][c],\n      valueBoard[2][c],\n      valueBoard[3][c],\n    ];\n\n    [column, flag] = move(column);\n    actions.push(flag);\n\n    for (let r = 0; r < columns; r++) {\n      valueBoard[r][c] = column[r];\n\n      const number = valueBoard[r][c];\n\n      updateCell(board[r][c], number);\n    }\n  }\n\n  hasActions(actions);\n  checkLose();\n  checkWin();\n}\n\nfunction moveDown() {\n  const actions = [];\n  let flag;\n\n  for (let c = 0; c < columns; c++) {\n    let column = [\n      valueBoard[3][c],\n      valueBoard[2][c],\n      valueBoard[1][c],\n      valueBoard[0][c],\n    ];\n\n    [column, flag] = move(column);\n    actions.push(flag);\n\n    column.reverse();\n\n    for (let r = 0; r < columns; r++) {\n      valueBoard[r][c] = column[r];\n\n      const number = valueBoard[r][c];\n\n      updateCell(board[r][c], number);\n    }\n  }\n  hasActions(actions);\n  checkLose();\n  checkWin();\n}\n\nfunction checkWin() {\n  [...cells].forEach((cell) => {\n    if (cell.textContent === \"2048\") {\n      messageWin.classList.remove(`hidden`);\n      document.removeEventListener(\"keydown\", playGame);\n\n      setTimeout(() => {\n        document.location.reload();\n      }, 5000);\n    }\n  });\n}\n\nfunction checkLose() {\n  if (!hasEmptyCell() && !hasAdjacentSameNumbers(valueBoard)) {\n    messageLose.classList.remove(`hidden`);\n  }\n}\n\nfunction playGame(e) {\n  e.preventDefault();\n\n  switch (e.key) {\n    case \"ArrowRight\":\n      moveRight();\n      break;\n    case \"ArrowLeft\":\n      moveLeft();\n      break;\n    case \"ArrowDown\":\n      moveDown();\n      break;\n    case \"ArrowUp\":\n      moveUp();\n      break;\n  }\n\n  document.querySelector(\".game-score\").textContent = score;\n}\n"],"names":[],"version":3,"file":"index.f75de5e1.js.map","sourceRoot":"/__parcel_source_root/"}