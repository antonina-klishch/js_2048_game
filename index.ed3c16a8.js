function t(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=Array(r);e<r;e++)n[e]=t[e];return n}function r(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var e,n,o=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=o){var a=[],u=!0,c=!1;try{for(o=o.call(t);!(u=(e=o.next()).done)&&(a.push(e.value),!r||a.length!==r);u=!0);}catch(t){c=!0,n=t}finally{try{u||null==o.return||o.return()}finally{if(c)throw n}}return a}}(t,r)||n(t,r)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(r){return function(r){if(Array.isArray(r))return t(r)}(r)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(r)||n(r)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(r,e){if(r){if("string"==typeof r)return t(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if("Object"===n&&r.constructor&&(n=r.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t(r,e)}}var o,a=0,u=document.querySelector(".start"),c=document.querySelectorAll("tr"),i=document.querySelectorAll("td"),l=document.querySelector(".message-start"),f=document.querySelector(".message-win"),s=document.querySelector(".message-lose"),d=[];function v(){o=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],h(),h();for(var t=0;t<4;t++)for(var r=0;r<4;r++){var e=o[t][r];m(d[t][r],e)}}function m(t,r){t.classList.value="field-cell",r>0?(t.textContent=r,t.classList.add("field-cell--".concat(r))):0===r&&(t.textContent="")}function y(t){return Math.floor(Math.random()*t)}function h(){if(p())for(var t=!1;!t;){var r=y(4),e=y(4);if(0===o[r][e]){var n=.1>=Math.random()?4:2;o[r][e]=n,d[r][e].textContent=n,d[r][e].classList.add("field-cell--".concat(n)),t=!0}}}function p(){for(var t=0;t<4;t++)for(var r=0;r<4;r++)if(0===o[t][r])return!0;return!1}function b(t){return t.filter(function(t){return 0!==t})}function S(t){for(var r=!1,e=b(t),n=0;n<e.length-1;n++)e[n]===e[n+1]&&(r=!0,e[n]*=2,e[n+1]=0,a+=e[n]);for(e=b(e);e.length<4;)e.push(0);return t.toString()!==e.toString()&&(r=!0),[e,r]}function g(t){t.includes(!0)&&h()}function A(){e(i).forEach(function(t){"2048"===t.textContent&&(f.classList.remove("hidden"),document.removeEventListener("keydown",L),setTimeout(function(){document.location.reload()},5e3))})}function w(){p()||function(t){for(var r=0;r<4;r++)for(var e=0;e<4;e++)if(r<3&&t[r][e]===t[r+1][e]||e<3&&t[r][e]===t[r][e+1])return!0;return!1}(o)||s.classList.remove("hidden")}function L(t){switch(t.preventDefault(),t.key){case"ArrowRight":!function(){for(var t=[],e=0;e<4;e++){var n,a,u=o[e];u.reverse(),u=(a=r(S(u),2))[0],n=a[1],t.push(n),o[e]=u.reverse();for(var c=0;c<4;c++){var i=o[e][c];m(d[e][c],i)}}g(t),w(),A()}();break;case"ArrowLeft":!function(){for(var t=[],e=0;e<4;e++){var n,a,u=o[e];u=(a=r(S(u),2))[0],n=a[1],t.push(n),o[e]=u;for(var c=0;c<4;c++){var i=o[e][c];m(d[e][c],i)}}g(t),w(),A()}();break;case"ArrowDown":!function(){for(var t=[],e=0;e<4;e++){var n,a,u=[o[3][e],o[2][e],o[1][e],o[0][e]];u=(a=r(S(u),2))[0],n=a[1],t.push(n),u.reverse();for(var c=0;c<4;c++){o[c][e]=u[c];var i=o[c][e];m(d[c][e],i)}}g(t),w(),A()}();break;case"ArrowUp":!function(){for(var t=[],e=0;e<4;e++){var n,a,u=[o[0][e],o[1][e],o[2][e],o[3][e]];u=(a=r(S(u),2))[0],n=a[1],t.push(n);for(var c=0;c<4;c++){o[c][e]=u[c];var i=o[c][e];m(d[c][e],i)}}g(t),w(),A()}()}document.querySelector(".game-score").textContent=a}e(c).forEach(function(t){var r=t.querySelectorAll("td");d.push(r)}),document.addEventListener("click",function(t){t.preventDefault(),t.target.closest(".start")?(l.classList.add("hidden"),u.textContent="Restart",u.classList.add("restart"),u.classList.remove("start"),v(),document.addEventListener("keydown",L)):t.target.closest(".restart")&&(v(),a=0,document.querySelector(".game-score").textContent=a)});
//# sourceMappingURL=index.ed3c16a8.js.map
